(window.webpackJsonp=window.webpackJsonp||[]).push([[21,4,6,9,11],{258:function(t,e,r){"use strict";r.r(e);var n={props:{text:{type:String,default:function(){return""}},hollow:{type:Boolean,default:function(){return!1}},icon:{type:String,default:function(){return null}}},data:function(){return{fullClasses:"h-12 bg-blue-400 rounded-full px-7 py-3 hover:text-white hover:bg-blue-500",hollowClasses:"h-12 bg-white border border-blue-400 rounded-full px-7 py-3 hover:text-white hover:bg-blue-500 hover:border-blue-500"}}},o=r(44),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("button",{class:t.hollow?t.hollowClasses:t.fullClasses,on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[e("div",{staticClass:"flex justify-between items-center h-full gap-2"},[t.icon?e("img",{staticClass:"h-full",attrs:{src:"/icons/".concat(t.icon,".png")}}):t._e(),t._v(" "),e("span",{class:{"text-white":!t.hollow}},[t._v(" "+t._s(t.text)+" ")])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(258).default})},259:function(t,e,r){"use strict";r.r(e);r(37);var n={props:{backRedirect:{type:String,default:function(){return""}},goBack:{type:Boolean,default:function(){return!1}},backRedirectReplace:{type:Boolean,default:function(){return!1}},backRedirectQuery:{type:Object,default:function(){}}},data:function(){return{name:localStorage.getItem("name"),userId:localStorage.getItem("userId")}}},o=r(44),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-10 w-screen items-center bg-blue-500 flex flex-row gap-3 fixed px-4 text-white z-40"},[e("NuxtLink",{directives:[{name:"show",rawName:"v-show",value:t.backRedirect,expression:"backRedirect"}],staticClass:"h-2/4 cursor-pointer",attrs:{to:{path:t.backRedirect,query:t.backRedirectQuery},replace:t.backRedirectReplace}},[e("img",{staticClass:"h-full",attrs:{src:"/icons/back.png"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.backRedirect&&t.goBack,expression:"!backRedirect && goBack"}],staticClass:"h-2/4 cursor-pointer",on:{click:function(e){return t.$router.go(-1)}}},[e("img",{staticClass:"h-full",attrs:{src:"/icons/back.png"}})]),t._v(" "),e("div",{staticClass:"h-full flex-grow"}),t._v(" "),e("div",{staticClass:"h-full absolute left-10"},[e("NuxtLink",{attrs:{to:"/"}},[e("img",{staticClass:"h-full",attrs:{src:"/title.png"}})])],1),t._v(" "),e("div",{staticClass:"text-sm"},[t._v("\n    "+t._s(t.name)+"\n  ")]),t._v(" "),t.name&&t.name.length>0?e("NuxtLink",{staticClass:"h-2/4 cursor-pointer",attrs:{to:{path:"/user",query:{userId:t.userId}}}},[e("img",{staticClass:"h-full",attrs:{src:"/icons/user.png"}})]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},260:function(t,e,r){"use strict";r.r(e);var n=r(44),component=Object(n.a)({},(function(){return(0,this._self._c)("div",{staticClass:"bg-black bg-opacity-70 w-screen h-screen fixed z-50"})}),[],!1,null,null,null);e.default=component.exports},262:function(t,e,r){"use strict";r.r(e);r(37);var n={props:{value:{type:String,default:function(){return""}},options:{type:Array,default:function(){return[]}}}},o=r(44),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("select",{staticClass:"w-52 border border-blue-400 rounded-full px-5 py-2",domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},[e("option",{attrs:{selected:"",value:"",disabled:""}},[t._v("\n    Seleziona\n  ")]),t._v(" "),t._l(t.options,(function(r){return e("option",{key:r.val,domProps:{value:r.val}},[t._v("\n    "+t._s(r.name)+"\n  ")])}))],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Select:r(262).default})},283:function(t,e,r){"use strict";r.r(e);r(37),r(31),r(45);var n=r(9),o=(r(30),r(102),{data:function(){return{product:{},loading:!1,selectedLockerId:null}},computed:{imageUrl:function(){return this.product?"/api/product/".concat(this.product.id,"/image"):"/empty.jpg"},formattedDate:function(){return this.product?this.$formatDate(this.product.insertionDate):""},formattedLockersList:function(){var t=[];if(!this.product.lockerList)return t;for(var e=0;e<this.product.lockerList.length;e++){var r=this.product.lockerList[e];t.push({val:r.id,name:"".concat(r.name," (").concat(r.address,", ").concat(r.province,")")})}return t},myProduct:function(){var t,e;return localStorage.getItem("userId")==(null===(t=this.product)||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id)},formattedLoanDays:function(){return this.product?this.product.maxLoanDays+(this.product.maxLoanDays>1?" giorni":" giorno"):""}},mounted:function(){this.getProduct()},methods:{getProduct:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,r=t.$route.query.idProduct,e.next=4,t.$callApi("/api/product/"+r,"GET");case 4:(n=e.sent).data&&(t.product=n.data.product),t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},book:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:if(t.selectedLockerId){e.next=5;break}return alert("Selezionare il locker"),e.abrupt("return");case 5:return t.loading=!0,e.next=8,t.$callApi("/api/book/","POST",{idProduct:t.product.id,lockerId:t.selectedLockerId});case 8:(r=e.sent).error?409==r.errorStatus&&alert("Non Ã¨ disponibile nessuno slot libero per il locker selezionato. Riprovare selezionando un altro locker"):(alert("Prenotazione effettuata. Controlla la tua casella di posta elettronica per ulteriori informazioni"),t.$router.go()),t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},goToUploadImage:function(){this.$router.push({path:"/uploadImage",query:{idProduct:this.product.id}})},goToEdit:function(){this.$router.push({path:"/editProduct",query:{idProduct:this.product.id}})}}}),l=r(44),component=Object(l.a)(o,(function(){var t,e,r,n,o=this,l=o._self._c;return l("div",[l("Loader",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}]}),o._v(" "),l("TopBar",{attrs:{"go-back":""}}),o._v(" "),l("div",{staticClass:"max-w-screen-md m-auto p-4 pt-12"},[l("div",{staticClass:"text-center mb-3 text-2xl"},[o._v("\n      "+o._s(o.product.title)+"\n    ")]),o._v(" "),l("div",{staticClass:"mb-3"},[l("img",{staticClass:"max-w-full m-auto",attrs:{src:o.imageUrl}})]),o._v(" "),l("div",{staticClass:"text-left flex justify-between mb-3"},[l("div",{staticClass:"truncate whitespace-nowrap w-2/4 underline text-blue-500"},[l("NuxtLink",{attrs:{to:{path:"/user",query:{userId:null===(t=o.product)||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id}}}},[o._v("\n          "+o._s(null===(r=o.product.user)||void 0===r?void 0:r.name)+" "+o._s(null===(n=o.product.user)||void 0===n?void 0:n.surname)+"\n        ")])],1),o._v(" "),l("div",{staticClass:"text-right truncate whitespace-nowrap w-2/4"},[o._v("\n        "+o._s(o.formattedDate)+"\n      ")])]),o._v(" "),l("div",{staticClass:"mb-6"},[o._v("\n      "+o._s(o.product.description)+"\n    ")]),o._v(" "),l("div",{staticClass:"mb-12"},[l("span",{staticClass:"font-light"},[o._v(" Durata max del prestito: "),l("span",{staticClass:"font-bold"},[o._v(o._s(o.formattedLoanDays)+" ")])])]),o._v(" "),o.myProduct?l("div",{staticClass:"flex flex-wrap items-center justify-end gap-4 mb-3"},[l("Button",{attrs:{text:"Cambia immagine",hollow:""},on:{click:function(t){return o.goToUploadImage()}}}),o._v(" "),l("Button",{attrs:{text:"Modifica"},on:{click:function(t){return o.goToEdit()}}})],1):l("div",{staticClass:"flex flex-wrap items-center justify-end gap-4 mb-3"},[o.product.availability?l("div",[l("Select",{attrs:{options:o.formattedLockersList},model:{value:o.selectedLockerId,callback:function(t){o.selectedLockerId=t},expression:"selectedLockerId"}}),o._v(" "),l("Button",{attrs:{text:"Prenota"},on:{click:function(t){return o.book()}}})],1):o._e(),o._v(" "),o.product&&!o.product.availability?l("div",[o._v("\n        Non disponibile.\n      ")]):o._e()])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Loader:r(260).default,TopBar:r(259).default,Button:r(258).default,Select:r(262).default})}}]);