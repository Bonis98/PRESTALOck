(window.webpackJsonp=window.webpackJsonp||[]).push([[7,4],{258:function(t,e,r){"use strict";r.r(e);var n={props:{text:{type:String,default:function(){return""}},hollow:{type:Boolean,default:function(){return!1}},icon:{type:String,default:function(){return null}}},data:function(){return{fullClasses:"h-12 bg-blue-400 rounded-full px-7 py-3 hover:text-white hover:bg-blue-500",hollowClasses:"h-12 bg-white border border-blue-400 rounded-full px-7 py-3 hover:text-white hover:bg-blue-500 hover:border-blue-500"}}},o=r(44),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("button",{class:t.hollow?t.hollowClasses:t.fullClasses,on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[e("div",{staticClass:"flex justify-between items-center h-full gap-2"},[t.icon?e("img",{staticClass:"h-full",attrs:{src:"/icons/".concat(t.icon,".png")}}):t._e(),t._v(" "),e("span",{class:{"text-white":!t.hollow}},[t._v(" "+t._s(t.text)+" ")])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(258).default})},263:function(t,e,r){"use strict";r.r(e);r(37);var n=r(9),o=(r(30),{props:{passedLoan:{type:Object,default:function(){return{}}},button:{type:String,default:function(){return""}}},data:function(){return{myUserId:localStorage.getItem("userId")}},computed:{imageUrl:function(){return"/api/product/".concat(this.passedLoan.product.id,"/image")},formattedDate:function(){return this.passedLoan?this.$formatDate(this.passedLoan.requestDate):""},formattedLoanDays:function(){return this.passedLoan?this.passedLoan.remainingDays+(this.passedLoan.remainingDays>1?" giorni":" giorno"):""}},methods:{markDeposit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,e.t0=t.button,e.next="startLoan"===e.t0?4:"endLoan"===e.t0?6:"requestReturnLocker"===e.t0?8:10;break;case 4:return r="/api/loan/start/"+t.passedLoan.product.id,e.abrupt("break",11);case 6:return r="/api/loan/close/"+t.passedLoan.product.id,e.abrupt("break",11);case 8:return r="/api/book/return/"+t.passedLoan.product.id,e.abrupt("break",11);case 10:return e.abrupt("return");case 11:return t.$emit("startLoading"),e.next=14,t.$callApi(r,"GET");case 14:(n=e.sent).error?409==n.errorStatus&&alert("Impossibile prenotare uno slot per la restituzione del prodotto. Riprovare"):(alert("Operazione effettuata correttamente. Controlla la tua casella di posta elettronica per ulteriori informazioni"),t.$router.go(0)),t.$emit("endLoading");case 17:case"end":return e.stop()}}),e)})))()}}}),l=r(44),component=Object(l.a)(o,(function(){var t,e,r,n=this,o=n._self._c;return o("div",{staticClass:"w-96 border border-solid border-gray-200 rounded-md shadow flex-shrink-0 flex flex-col items-center",staticStyle:{height:"32rem","max-width":"95vw"}},[o("div",{staticClass:"h-3/4 overflow-hidden flex items-center"},[o("img",{staticClass:"w-full",attrs:{src:n.imageUrl}})]),n._v(" "),n.passedLoan.alreadyStarted?o("div",{staticClass:"text-left w-11/12 flex-grow break-words font-light text-sm"},[n._v("\n    Prodotto in prestito dal "+n._s(n.$formatDate(n.passedLoan.loanStartDate))+" (tempo rimanente: "+n._s(n.formattedLoanDays)+")\n  ")]):n._e(),n._v(" "),o("div",{staticClass:"text-left w-11/12 flex justify-between"},[o("div",{staticClass:"font-bold flex-grow truncate whitespace-nowrap w-2/4"},[n._v("\n      "+n._s(n.passedLoan.product.title)+"\n    ")])]),n._v(" "),o("div",{staticClass:"text-left w-11/12 flex justify-between"},[o("div",{staticClass:"flex-grow text-right truncate whitespace-nowrap w-2/4"},[n.myUserId!=n.passedLoan.owner.id?o("span",[n._v("\n        Di\n        "),o("NuxtLink",{staticClass:"underline text-blue-500",attrs:{to:{path:"/user",query:{userId:n.passedLoan.owner.id}}}},[n._v("\n          "+n._s(n.passedLoan.owner.name)+" "+n._s(n.passedLoan.owner.surname)+"\n        ")])],1):n._e(),n._v(" "),n.myUserId!=n.passedLoan.borrower.id?o("span",[n._v("\n        Prestato a\n        "),o("NuxtLink",{staticClass:"underline text-blue-500",attrs:{to:{path:"/user",query:{userId:n.passedLoan.borrower.id}}}},[n._v("\n          "+n._s(n.passedLoan.borrower.name)+" "+n._s(n.passedLoan.borrower.surname)+"\n        ")])],1):n._e()])]),n._v(" "),n.passedLoan.locker?o("div",{staticClass:"text-left w-11/12 flex-grow break-words"},[o("div",[n._v("\n      Locker "+n._s(null===(t=n.passedLoan.locker)||void 0===t?void 0:t.name)+" ("+n._s(null===(e=n.passedLoan.locker)||void 0===e?void 0:e.address)+", "+n._s(null===(r=n.passedLoan.locker)||void 0===r?void 0:r.province)+")\n    ")]),n._v(" "),o("div",[n._v("\n      Slot del locker: "+n._s(n.passedLoan.lockerSlot)+"\n    ")]),n._v(" "),n.passedLoan.returnSlotBooked?o("div",[n._v("\n      Slot del locker di restituzione: "+n._s(n.passedLoan.returnLockerSlot)+"\n    ")]):n._e()]):n._e(),n._v(" "),n.passedLoan.terminationDate||""==n.button?n._e():o("div",{staticClass:"text-right w-11/12 mt-2 mb-2"},[o("Button",{attrs:{text:"requestReturnLocker"==n.button?"Prenota locker":"Conferma deposito"},on:{click:function(t){return n.markDeposit()}}})],1),n._v(" "),o("div",{staticClass:"text-right w-11/12 font-light text-sm"},[n._v("\n    Richiesta di prestito effettuata il "+n._s(n.formattedDate)+"\n  ")]),n._v(" "),n.passedLoan.loanStartDate?o("div",{staticClass:"text-right w-11/12 font-light text-sm"},[n._v("\n    Prestito avviato il "+n._s(n.$formatDate(n.passedLoan.loanStartDate))+"\n  ")]):n._e(),n._v(" "),n.passedLoan.terminationDate?o("div",{staticClass:"text-right w-11/12 font-light text-sm"},[n._v("\n    Prestito terminato il "+n._s(n.$formatDate(n.passedLoan.requestDate))+"\n  ")]):n._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(258).default})}}]);