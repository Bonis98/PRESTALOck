(window.webpackJsonp=window.webpackJsonp||[]).push([[18,4,5,6,11],{258:function(t,e,r){"use strict";r.r(e);var n={props:{text:{type:String,default:function(){return""}},hollow:{type:Boolean,default:function(){return!1}},icon:{type:String,default:function(){return null}}},data:function(){return{fullClasses:"h-12 bg-blue-400 rounded-full px-7 py-3 hover:text-white hover:bg-blue-500",hollowClasses:"h-12 bg-white border border-blue-400 rounded-full px-7 py-3 hover:text-white hover:bg-blue-500 hover:border-blue-500"}}},o=r(44),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("button",{class:t.hollow?t.hollowClasses:t.fullClasses,on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[e("div",{staticClass:"flex justify-between items-center h-full gap-2"},[t.icon?e("img",{staticClass:"h-full",attrs:{src:"/icons/".concat(t.icon,".png")}}):t._e(),t._v(" "),e("span",{class:{"text-white":!t.hollow}},[t._v(" "+t._s(t.text)+" ")])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(258).default})},259:function(t,e,r){"use strict";r.r(e);r(37);var n={props:{backRedirect:{type:String,default:function(){return""}},goBack:{type:Boolean,default:function(){return!1}},backRedirectReplace:{type:Boolean,default:function(){return!1}},backRedirectQuery:{type:Object,default:function(){}}},data:function(){return{name:localStorage.getItem("name"),userId:localStorage.getItem("userId")}}},o=r(44),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-10 w-screen items-center bg-blue-500 flex flex-row gap-3 fixed px-4 text-white z-40"},[e("NuxtLink",{directives:[{name:"show",rawName:"v-show",value:t.backRedirect,expression:"backRedirect"}],staticClass:"h-2/4 cursor-pointer",attrs:{to:{path:t.backRedirect,query:t.backRedirectQuery},replace:t.backRedirectReplace}},[e("img",{staticClass:"h-full",attrs:{src:"/icons/back.png"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.backRedirect&&t.goBack,expression:"!backRedirect && goBack"}],staticClass:"h-2/4 cursor-pointer",on:{click:function(e){return t.$router.go(-1)}}},[e("img",{staticClass:"h-full",attrs:{src:"/icons/back.png"}})]),t._v(" "),e("div",{staticClass:"h-full flex-grow"}),t._v(" "),e("div",{staticClass:"h-full absolute left-10"},[e("NuxtLink",{attrs:{to:"/"}},[e("img",{staticClass:"h-full",attrs:{src:"/title.png"}})])],1),t._v(" "),e("div",{staticClass:"text-sm"},[t._v("\n    "+t._s(t.name)+"\n  ")]),t._v(" "),t.name&&t.name.length>0?e("NuxtLink",{staticClass:"h-2/4 cursor-pointer",attrs:{to:{path:"/user",query:{userId:t.userId}}}},[e("img",{staticClass:"h-full",attrs:{src:"/icons/user.png"}})]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},260:function(t,e,r){"use strict";r.r(e);var n=r(44),component=Object(n.a)({},(function(){return(0,this._self._c)("div",{staticClass:"bg-black bg-opacity-70 w-screen h-screen fixed z-50"})}),[],!1,null,null,null);e.default=component.exports},261:function(t,e,r){"use strict";r.r(e);var n={props:{value:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}}}},o=r(44),component=Object(o.a)(n,(function(){var t=this;return(0,t._self._c)("input",{staticClass:"w-72 border border-blue-400 rounded-full px-5 py-2",attrs:{type:t.type?t.type:"text"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},change:function(e){return t.$emit("change",e)}}})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Input:r(261).default})},281:function(t,e,r){"use strict";r.r(e);var n=r(9),o=(r(37),r(30),{data:function(){return{loading:!1,sentOtp:!1,email:"",otp:"",password:"",password2:""}},methods:{askOtp:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.email){e.next=3;break}return alert("Inserire l'indirizzo email"),e.abrupt("return");case 3:return t.loading=!0,e.next=6,t.$callApi("/api/forgotPassword/"+encodeURIComponent(t.email),"GET");case 6:(r=e.sent).error?404==r.errorStatus&&alert("Indirizzo email non trovato"):(alert("Abbiamo inviato un codice OTP alla tua casella di posta elettronica. Inseriscilo per reimpostare la password"),t.sentOtp=!0),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},changePassword:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.email){e.next=3;break}return alert("Inserire l'indirizzo email"),e.abrupt("return");case 3:if(""!=t.otp){e.next=6;break}return alert("Inserire il codice OTP ottenuto per email"),e.abrupt("return");case 6:if(""!=t.password){e.next=9;break}return alert("Inserire una password"),e.abrupt("return");case 9:if(t.password==t.password2){e.next=12;break}return alert("Le password devono coincidere"),e.abrupt("return");case 12:return t.loading=!0,e.next=15,t.$callApi("/api/resetPassword","POST",{email:t.email,tempCode:t.otp,newPassword:t.password});case 15:(r=e.sent).error?403==r.errorStatus&&alert("I dati inseriti non sono corretti. Riprovare"):(alert("Password reimpostata correttamente"),localStorage.setItem("token",r.data.token),localStorage.setItem("name",r.data.name+" "+r.data.surname),localStorage.setItem("userId",r.data.userId),t.$router.push({path:"/"})),t.loading=!1;case 18:case"end":return e.stop()}}),e)})))()}}}),l=r(44),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("Loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),e("TopBar"),t._v(" "),e("div",{staticClass:"text-center w-11/12 m-auto mb-6 justify-around gap-24 pt-12"},[e("div",{staticClass:"text-center mb-3 text-2xl"},[t._v("\n      Password dimenticata\n    ")]),t._v(" "),e("div",{staticClass:"text-center"},[e("div",{staticClass:"mt-3"},[e("div",[t._v("Indirizzo email")]),t._v(" "),e("Input",{model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.sentOtp,expression:"sentOtp"}],staticClass:"mt-3"},[e("div",[t._v("Codice OTP ricevuto via mail")]),t._v(" "),e("Input",{attrs:{type:"password"},model:{value:t.otp,callback:function(e){t.otp=e},expression:"otp"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.sentOtp,expression:"sentOtp"}],staticClass:"mt-3"},[e("div",[t._v("Nuova Password")]),t._v(" "),e("Input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.sentOtp,expression:"sentOtp"}],staticClass:"mt-3"},[e("div",[t._v("Conferma nuova Password")]),t._v(" "),e("Input",{attrs:{type:"password"},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.sentOtp,expression:"!sentOtp"}],staticClass:"mt-3"},[e("Button",{attrs:{text:"Richiedi codice OTP"},on:{click:function(e){return t.askOtp()}}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.sentOtp,expression:"sentOtp"}],staticClass:"mt-3"},[e("Button",{attrs:{text:"Cambia password"},on:{click:function(e){return t.changePassword()}}})],1),t._v(" "),e("div",{staticClass:"mt-3"},[e("NuxtLink",{attrs:{to:{path:"/signin"}}},[e("Button",{attrs:{text:"Annulla",hollow:""}})],1)],1)])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Loader:r(260).default,TopBar:r(259).default,Input:r(261).default,Button:r(258).default})}}]);